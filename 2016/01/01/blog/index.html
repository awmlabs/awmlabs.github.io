<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<meta name="generator" content="Hugo 0.16-DEV" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" type="text/css">
<link rel="alternate" href="/index.xml" type="application/rss+xml" title="AWM TechNotes">
<title>Blog はじめました - AWM TechNotes</title>
</head>
<body>

<header>
  <div class="container">
    <a class="path" href="http://blog.awm.jp/">[AWM TechNotes]</a>
    <span class="caret"># _</span>
  </div>
</header>

<div class="container">


<main role="main" class="article">
  
<article class="single" itemscope itemtype="http://schema.org/BlogPosting">
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2016-01-01">January 01, 2016</time></span>


    <span class="key">in</span>
    <span class="val">

        <a href="http://blog.awm.jp/categories/blog">Blog</a>

    </span>


    <br>
    <span class="key">tags:</span>
    <span class="val">

        <a href="http://blog.awm.jp/tags/github">Github</a>

        <a href="http://blog.awm.jp/tags/hugo">Hugo</a>

        <a href="http://blog.awm.jp/tags/css">CSS</a>

    </span>

  </div>
  <h1 class="headline" itemprop="headline">Blog はじめました</h1>
  <section class="body" itemprop="articleBody">
    

<h1 id="blog-はじめました:e95c7dc8eefee7d0e25121cd7f0007ae">Blog はじめました</h1>

<p>WordPressを試したり色々と迷いましたが、神の啓示に従い Github.io + Hugo + CircleCI の構成にしました。</p>

<ul>
<li><a href="https://twitter.com/nobu666/status/680683739534393344">https://twitter.com/nobu666/status/680683739534393344</a></li>
</ul>

<p>CircleCI 対応は時間かかりそうなので、デプロイはとりあえず手動対処にして試行錯誤した結果が以下のレポジトリです。</p>

<ul>
<li><del> <a href="https://github.com/awmcorp/blog.awm.jp">https://github.com/awmcorp/blog.awm.jp</a> </del></li>
<li><ins> <a href="https://github.com/awmlabs/blog.awm.jp">https://github.com/awmlabs/blog.awm.jp</a> (CircleCI連携の都合で、レポジトリを移動しました)</ins></li>
</ul>

<h1 id="github-io:e95c7dc8eefee7d0e25121cd7f0007ae">Github.io</h1>

<p>github.com で &lt;ユーザ名&gt;.github.io というレポジトリを作れば、その URL でアクセス出来ます。</p>

<ul>
<li><a href="https://github.com/awmlabs/awmlabs.github.io">https://github.com/awmlabs/awmlabs.github.io</a></li>
<li>=&gt; <a href="https://awmlabs.github.io/">https://awmlabs.github.io/</a></li>
</ul>

<p>ここにブログを表示する静的なHTMLを入れていけば良い訳です。
Markdown ファイルからBlogサイトのHTMLを生成するツールは Hugo を使ってみました。</p>

<h2 id="blog-awm-jp-を公開urlにしたい:e95c7dc8eefee7d0e25121cd7f0007ae">blog.awm.jp を公開URLにしたい</h2>

<ul>
<li>=&gt; <a href="https://blog.awm.jp/">https://blog.awm.jp/</a> (awmlabs.github.io を指します)</li>
</ul>

<p>DNS の CNAME で blog.awm.jp =&gt; awmlabs.github.io を向けた上で、static/CNAME に blog.awm.jp の文字を入れておくと awmlabs.github.io でアクセスしても blog.awm.jp にリダイレクトするようです。</p>

<h1 id="hugo:e95c7dc8eefee7d0e25121cd7f0007ae">Hugo</h1>

<pre><code>$ hugo new site blog.awm.jp
$ cd blog.awm.jp
$ hugo new 2016/01/01/blog.md
</code></pre>

<p>のようにすると</p>

<pre><code>blog.awm.jp/content/2016/01/01/blog.md
</code></pre>

<p>にテンプレートの md ファイルが出来るので、そこに文章を記述して、blog.awm.jp フォルダのトップで、</p>

<pre><code>$ hugo
</code></pre>

<p>を実行します。すると public 以下に表示用の HTMLファイルが生成されます。 実際に表示する為には、テーマが必要です。</p>

<h2 id="hugo-themes:e95c7dc8eefee7d0e25121cd7f0007ae">Hugo themes</h2>

<ul>
<li><p><a href="http://themes.gohugo.io/">http://themes.gohugo.io/</a>
ここで色々なテーマが確認できます。一目惚れした base16 を適用しました。</p></li>

<li><p><a href="http://themes.gohugo.io/base16/">http://themes.gohugo.io/base16/</a></p></li>
</ul>

<pre><code>git submodule add git@github.com:htdvisser/hugo-base16-theme.git themes/base16
</code></pre>

<p>として持ってきます。尚、大抵のカスタマイズはトップのlayouts や static/css 以下で弄れるので、fork しなくても良さそうです。</p>

<p>後は、先ほど hugo を実行したのと同じ要領で、更に server -watch オプションをつけると、</p>

<pre><code>$ hugo  server --watch -t base16
＜略＞
Web Server is available at http://127.0.0.1:1313/
</code></pre>

<p>このように <a href="http://127.0.0.1:1313/">http://127.0.0.1:1313/</a> で表示が確認できます。
md ファイルを編集するとリアルタイムに反映してくれて便利です。(これが出来なかったら hugo を使おうとしなかった位、大事な機能)</p>

<p>尚、config.toml (又は config.yaml) で theme を定義すれば -t base16 は不要です。</p>

<h2 id="syntax-highlight:e95c7dc8eefee7d0e25121cd7f0007ae">Syntax Highlight</h2>

<pre><code>pip install Pygments
</code></pre>

<p>で、Pygments を入れて。config.toml に</p>

<pre><code>pygmentsuseclasses = true
</code></pre>

<p>を入れるだけで OK です。</p>

<h2 id="テーマの文字:e95c7dc8eefee7d0e25121cd7f0007ae">テーマの文字</h2>

<p>base16 は文字が読み辛いので自分好みに変更しました。</p>

<ul>
<li>記事の背景色 (少し明るくした)</li>
</ul>


article.single section,
.article-list article {
;  background-color: #f2f0ec;
  background-color: #fcf8f0;


<ul>
<li>文字フォント (Windows で見た時に MS ゴシックが使われないように)</li>
</ul>


body {
   ＜略＞
  font-family: "Hiragino Kaku Gothic ProN", Meiryo, Tahoma, Verdana, Arial, sans-serif;
;  font-family: 'Source Code Pro', monospace;
}


<h1 id="circleci:e95c7dc8eefee7d0e25121cd7f0007ae">CircleCI</h1>

<p>間に合わなかったので、また今度。。</p>

<p>(2016/01/02 追記) &gt; <a href="http://blog.awm.jp/2016/01/02/circleci/">http://blog.awm.jp/2016/01/02/circleci/</a></p>

<h1 id="備考:e95c7dc8eefee7d0e25121cd7f0007ae">備考</h1>

<ul>
<li>Circle CI のアカウント作成で Github と連携する際に「所属する組織全てのアクセス権限」を要求する(Github API の仕様上、組織毎にオンオフ出来ない)ので、自分が管理する組織にのみ所属するアカウント (awmlabs) を使う事にしました。</li>
<li>当初、改行がされないと思ったけど、サマリーの方は改行無しで、記事のページに飛んだらちゃんと改行されてました。早とちり。</li>
<li>色々なテーマを試そうとするとエラーがよく出ます。テーマ毎に md ファイルの先頭で必要な定義が違うみたいで、ちゃんとテーマの README を読んで設定しましょう。</li>
<li>new 〜.md で作ったテンプレファイルでは draft = true になっているので、これを消すか false にしないと記事を表示しません。</li>
</ul>

<h1 id="参考-url:e95c7dc8eefee7d0e25121cd7f0007ae">参考 URL</h1>

<ul>
<li><a href="https://github.com/nobu666/nobu666.com">https://github.com/nobu666/nobu666.com</a></li>
<li><a href="http://qiita.com/eichann/items/4fe61b8b9bbafcfbe847">http://qiita.com/eichann/items/4fe61b8b9bbafcfbe847</a></li>
</ul>

  </section>
</article>

</main>


</div>

<footer>
  <div class="container">
    <span class="copyright">&copy; 2016  AWM TechNotes - <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></span>
  </div>
</footer>

</body>
</html>

